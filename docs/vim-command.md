# vim

## 第四讲-定位搜索替换

### 定位及文件状态

- gg-跳转到首行
- G-跳转到最后一行
- 输入行号+G 跳转到指定行

> 输入 CTRL-G 显示当前编辑文件中当前光标所在行位置以及文件状态信息。



### 搜索命令

- 正向查找

​      normal 模式下输入反斜杠“/”+要查找的字符串即可。

- 反向查找

  输入问号"?"+要查找的字符串

>   按“n”查找下一个匹配，大写“N”相反方向的下一个匹配，

### 配对括号查找

将光标移动到要匹配的括号起始处，按%即可匹配对应括号。

>  输入 % 可以查找配对的括号 )、]、}。**，该功能在调试代码，确定代码块是很有用的。

### 查找替换

- 行替换

  ```shell
  --替换当前光标所在当的第一个匹配做替换
  :s/old/new
  --替换全行的匹配串
  :s/old/new/g
  --替换全行的匹配串（提示是否进行替换）
  :s/old/new/gc
  ```


- 多行替换

  ```shell
  --替换若干行中的所有匹配串
  :#,#s/old/new/g
  --若干行带提示替换
  :1,5s/old/new/gc
  ```

- 全局替换

  ```shell
  --替换整个文件中每个匹配串
  %s/old/new/g
  --带提示替换
  %s/old/new/gc
  ```

### 总结

  1. CTRL-G 用于显示当前光标所在位置和文件状态信息。
     G 用于将光标跳转至文件最后一行。
     先敲入一个行号然后输入大写 G 则是将光标移动至该行号代表的行。
     gg 用于将光标跳转至文件第一行。
  2. 输入 / 然后紧随一个字符串是在当前所编辑的文档中正向查找该字符串。
     输入 ? 然后紧随一个字符串则是在当前所编辑的文档中反向查找该字符串。
     完成一次查找之后按 n 键是重复上一次的命令，可在同一方向上查
     找下一个匹配字符串所在；或者按大写 N 向相反方向查找下一匹配字符串所在。
     CTRL-O 带您跳转回较旧的位置，CTRL-I 则带您到较新的位置。
  3. 如果光标当前位置是括号(、)、[、]、{、}，按 % 会将光标移动到配对的括号上
  4. 在一行内替换头一个字符串 old 为新的字符串 new，请输入  :s/old/new
     在一行内替换所有的字符串 old 为新的字符串 new，请输入  :s/old/new/g
     在两行内替换所有的字符串 old 为新的字符串 new，请输入  :#,#s/old/new/g
     在文件内替换所有的字符串 old 为新的字符串 new，请输入  :%s/old/new/g
     进行全文替换时询问用户确认每个替换需添加 c 标志        :%s/old/new/gc

## 第五讲-外部命-保存-合并

### 执行外部命令

normal 模式下输入冒号+叹号+外部命令可以执行该外部命令。

```shell
--执行外部命令查看当前文件夹下目录
:!dir
```

### 保存文件

**一般保存**：一般的保存文件在Normal模式下输入:w即可保存

**另存为**：输入:w filename

### 选择性保存

> v-键可以进入选择模式，移动光标扩大或缩小范围。

按v键选择文本后输入:w filename 保存选择内容到新文件；

### 提取合并文件

r (read)可以提取文件及外部命令输出的内容；

> :r filename 读取文件内容到当前光标处
>
> :r !ls            读取外部命令输出到当前光标处

### 总结

 1. :!command 用于执行一个外部命令 command。

     ```shell
     --请看一些实际例子：
     (MS-DOS)         (Unix)
     :!dir            :!ls            -  用于显示当前目录的内容。
     :!del FILENAME   :!rm FILENAME   -  用于删除名为 FILENAME 的文件。
     ```



  2. :w FILENAME  可将当前 VIM 中正在编辑的文件保存到名为 FILENAME 的文
     件中。

  3. v motion :w FILENAME 可将当前编辑文件中可视模式下选中的内容保存到文件
     FILENAME 中。

  4. :r FILENAME 可提取磁盘文件 FILENAME 并将其插入到当前文件的光标位置
     后面。

  5. :r !dir 可以读取 dir 命令的输出并将其放置到当前文件的光标位置后面。

## 第六章-编辑文本类命令

### 插入新行

 输入小写 o 将在光标的下方打开新的一行并进入插入模式。

 输入 大写O将在光标的上方打开新的一行并进入插入模式。

### 文本插入

输入**a**将在光标之后插入文本，进入编辑模式

输入**i**将在当前光标处插入文本，进入编辑模式
输入**A**将在行末插入文本，进入编辑模式
> 提示：a、i 和 A 都会带您进入插入模式，惟一的区别在于字符插入的位置。
> 在编辑文本时可配合e、w、0（零）、$、gg、G等定位光标编辑文本
### 编辑替换
输入r可以替换昂前光标所在位置的单个字符或文字。
输入R可连续替换多个字符（持续替换）。
### 复制粘贴
输入y复制文本，输入P粘贴文本.
### 总结
  1. 输入小写的 o 可以在光标下方打开新的一行并进入插入模式。
     输入大写的 O 可以在光标上方打开新的一行。

  2. 输入小写的 a 可以在光标所在位置之后插入文本。
     输入大写的 A 可以在光标所在行的行末之后插入文本。

  3. e 命令可以使光标移动到单词末尾。

  4. 操作符 y 复制文本，p 粘贴先前复制的文本。

  5. 输入大写的 R 将进入替换模式，直至按 ESC 键回到正常模式。

  6. 输入 :set xxx 可以设置 xxx 选项。一些有用的选项如下：
        'ic' 'ignorecase'       查找时忽略字母大小写
        'is' 'incsearch'        查找短语时显示部分匹配
        'hls' 'hlsearch'        高亮显示所有的匹配短语
     选项名可以用完整版本，也可以用缩略版本。

  7. 在选项前加上 no 可以关闭选项：  :set noic

## 第七章-设置vim

输入 :set xxx 可以设置 xxx 选项。一些有用的选项如下：
'ic' 'ignorecase'       查找时忽略字母大小写
'is' 'incsearch'        查找短语时显示部分匹配
'hls' 'hlsearch'        高亮显示所有的匹配短语
选项名可以用完整版本，也可以用缩略版本。

在选项前加上 no 可以关闭选项：  :set noic

以下为常用设置：

| 命令 | 全称       | 说明                   |
| ---- | ---------- | ---------------------- |
| ic   | ignorecase | 查找时忽略字母大小写   |
| is   | incsearch  | 查找短语时显示部分匹配 |
| hls  | hlsearch   | 高亮显示所有的匹配短语 |
| nu   | number     | 显示行号               |

### 配置启动脚本

 Vim 的功能特性要比 Vi 多得多，但其中大部分都没有缺省启用。为了使用更多的
  特性，您得创建一个 vimrc 文件。

  1. 开始编辑 vimrc 文件，具体命令取决于您所使用的操作系统：
        :edit ~/.vimrc          这是 Unix 系统所使用的命令
        :edit $VIM/_vimrc       这是 MS-Windows 系统所使用的命令

  2. 接着读取 vimrc 示例文件的内容：
        :r $VIMRUNTIME/vimrc_example.vim

  3. 保存文件，命令为：
        :write

  下次您启动 Vim 时，编辑器就会有了语法高亮的功能。
  您可以把您喜欢的各种设置添加到这个 vimrc 文件中。
  要了解更多信息请输入 :help vimrc-intro

## 快捷键

CTRL+g ：显示当前行信息

CTRL+o :   回到较旧的位置

CTRL+i  :   去较新的位置

## 获取帮助

Vim 拥有一个细致全面的在线帮助系统。要启动该帮助系统，请选择如下三种方法：

1. 按下 HELP 键 (如果键盘上有的话)
2. 按下 F1 键 (如果键盘上有的话)
3. 输入  :help command name 回车

> 如果出现两个以上的窗口可以使用CTRL+W切换，或使用:q退出

## 自动补全

现在输入一个目录的起始部分，例如输入： :e
接着按 CTRL-D 键，Vim 会显示以 e 开始的命令的列表。
然后按 <Badge type="tip" text="TAB" vertical="middle"/> 键，Vim 会补全命令为 :edit 。

> 提示：补全对于许多命令都有效。您只需尝试按 CTRL-D 和 TAB。
>       它对于 :help 命令非常有用。
